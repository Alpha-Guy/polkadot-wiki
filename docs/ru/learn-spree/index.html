<!DOCTYPE html><html lang="ru"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>SPREE · Polkadot Wiki</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Shared Protected Runtime Execution Enclaves (SPREE) sometimes referred to as &quot;trust wormholes,&quot; are fragments of logic comparable to runtime modules in Substrate, but live on the Polkadot Relaychain and may be opted into by parachains."/><meta name="docsearch:language" content="ru"/><meta property="og:title" content="SPREE · Polkadot Wiki"/><meta property="og:type" content="website"/><meta property="og:url" content="undefined/"/><meta property="og:description" content="Shared Protected Runtime Execution Enclaves (SPREE) sometimes referred to as &quot;trust wormholes,&quot; are fragments of logic comparable to runtime modules in Substrate, but live on the Polkadot Relaychain and may be opted into by parachains."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&amp;display=swap"/><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"/><link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"/><link rel="stylesheet" href="/css/klaro.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script><script type="text/javascript" src="https://unpkg.com/aos@next/dist/aos.js"></script><script type="text/javascript" src="/js/custom.js"></script><script type="text/javascript" src="/js/klaro-config.js"></script><script type="text/javascript" src="/js/klaro.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ru"><img class="logo" src="/img/logo_polkadot_wiki.svg" alt="Polkadot Wiki"/><h2 class="headerTitleWithLogo">Polkadot Wiki</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/ru/getting-started" target="_self">Get Started</a></li><li class="siteNavGroupActive"><a href="/docs/ru/learn-launch" target="_self">Learn</a></li><li class="siteNavGroupActive"><a href="/docs/ru/build-index" target="_self">Build</a></li><li class="siteNavGroupActive"><a href="/docs/ru/maintain-index" target="_self">Maintain </a></li><li class=""><a href="https://guide.kusama.network" target="_self">Kusama</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class="siteNavGroupActive"><a href="/docs/ru/contributing" target="_self">Contribute</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Русский</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/learn-spree">English</a></li><li><a href="/docs/zh-CN/learn-spree">中文</a></li><li><a href="https://crowdin.com/project/polkadot-wiki" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Advanced</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">General<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/ru/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/claims">Claims</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/redenomination">Redenomination of DOT</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/grants">Grants</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/research">Polkadot Research</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/community">Community</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/contributing">Contributing</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/contributors">Contributors</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/glossary">Terms and Definitions</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/faq">Frequently Asked Questions (FAQs)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Learn<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/ru/learn-launch">Polkadot Launch Phases</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Basics</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/learn-accounts">Polkadot Accounts</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-account-generation">Account Generation</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-account-restore">Backing up and Restoring Accounts</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-architecture">Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-security">Security of the network</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-consensus">Polkadot Consensus</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-nominator">Nominator</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-validator">Validator</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-collator">Collator</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-governance">Governance</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-identity">Identity</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-bridges">Bridges</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-parachains">Parachains</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-parathreads">Parathreads</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-balance-transfers">How to transfer Balances</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-transaction-fees">Transaction Fees</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-polkadot-host">Polkadot Host (PH)</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-treasury">Treasury</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/learn-staking">Staking</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-proxies">Proxy Accounts</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-availability">Availability and Validity</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-randomness">Randomness</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-crosschain">Cross-chain Message Passing (XCMP)</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/ru/learn-spree">SPREE</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-wasm">WebAssembly (Wasm)</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-phragmen">What is Phragmen and what does it mean for node operators?</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-simple-payouts">Simple Payouts</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Cryptography</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/learn-cryptography">Cryptography Explainer</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-keys">Polkadot Keys</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Economics</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/learn-DOT">DOT</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-auction">Parachain Slots Auction</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Polkadot Comparisons</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/learn-comparisons-ethereum-2">Ethereum 2.0</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-comparisons-cosmos">Cosmos</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-comparisons-dfinity">Dfinity</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-comparisons">Other comparisons</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Build<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/ru/build-index">Builders Portal</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Development Guide</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/build-build-with-polkadot">Polkadot Builders Starter&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-pdk">Parachain Development Kits (PDKs)</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/learn-implementers-guide">Parachain Implementer&#x27;s Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-cumulus">Cumulus</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-smart-contracts">Smart Contracts</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-oracle">Oracles</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-wallets">Polkadot Wallets</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Integration Guide</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/build-integration">Integration Initiation</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-protocol-info">Polkadot Protocol</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-node-management">Node Management</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-node-interaction">Node Interaction</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-transaction-construction">Transaction Construction</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/build-tools-index">Tools</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Resources</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/build-examples-index">Examples</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/build-hackathon">Hackathon</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Maintain<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-index">Network Maintainers</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-polkadot-parameters">Parameters</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Nodes and Dapps</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-sync">Set up a Full Node</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-networks">Networks</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-wss">Set up Secure WebSocket for Remote Connections</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-errors">Resolving Errors</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Nominator Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-nominate-polkadot">How to Nominate on Polkadot</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-unbond">Stop Being a Nominator</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Validator Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-validate-polkadot">How to run a Validator on Polkadot</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-validator-payout">Validator Payout Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-systemd">How to run your node as a `systemd` process</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-secure-validator">Secure Validator</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-use-polkadot-secure-validator">How to use Polkadot Secure Validator Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-setup-sentry-node">Set Up a Sentry Node</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-upgrade">How to Upgrade Your Validator</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-monitor-your-node">Monitor your node</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-chill">How to Chill</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Governance Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-democracy">Participate in Democracy</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-join-council">Join the Council</a></li><li class="navListItem"><a class="navItem" href="/docs/ru/maintain-guides-how-to-vote-councillor">Voting for Councillors</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/polkadot-wiki/ru" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">SPREE</h1></header><article><div><span><p>Shared Protected Runtime Execution Enclaves (SPREE) sometimes referred to as &quot;trust wormholes,&quot; are fragments of logic comparable to runtime modules in Substrate, but live on the Polkadot Relaychain and may be opted into by parachains.</p>
<p>SPREE in brief was described with the following properties and functions:</p>
<ul>
<li>Parachains can opt-in to special runtime logic fragments (like smart contracts).</li>
<li>These fragments have their own storage and own <a href="learn-crosschain">XCMP</a> endpoint.</li>
<li>All instances across parachains have identical logic.</li>
<li>It executes alongside parachain.</li>
<li>Protected: storage can not be altered by parachain logic; messages can not be faked from them by parachains.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="origin"></a><a href="#origin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Origin</h2>
<p>On 28 March, 2019 u/Tawaren, a member of the Polkadot community, made a post on <a href="https://www.reddit.com/r/dot/">r/dot</a> called &quot;SmartProtocols Idea&quot; and laid out a proposal for <a href="https://www.reddit.com/r/dot/comments/b6kljn/smartprotocols_idea/">Smart Protocols</a>. The core insight of the post was that XCMP had a complication in that it was difficult to verify and prove code was executed on a parachain without trust. A solution was to install the SmartProtocols in the Relaychain that would be isolated blobs of code with their own storage per instance that could only be changed through an interface with each parachain. SmartProtocols are the precursor to SPREE.</p>
<h2><a class="anchor" aria-hidden="true" id="what-is-a-spree-module"></a><a href="#what-is-a-spree-module" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is a SPREE module?</h2>
<p>SPREE modules are fragments of logic (in concrete terms they are blobs of WebAssembly code) that are uploaded onto Polkadot through a governance mechanism or by parachains. Once the blob is uploaded to Polkadot, all other parachains can decide to opt-in to the logic. The SPREE module would retain its own storage independent of the parachain, but would be able to be called through an interface with the parachain. Parachains will send messages to the SPREE module synchronously.</p>
<p>SPREE modules are important to the overall XCMP architecture because they give guarentee to the code that will be executed on destination parachains. While XCMP guarantees the delivery of a message, it does not guarantee what code will be executed, i.e. how the receiving parachain will interpret the message. While XCMP accomplishes trustless message passing, SPREE is the trustless interpenetration of the message and a key part to the usefulness of XCMP.</p>
<p>SPREE modules are like recipes in cookbooks. For example, if we give an order to a cook to make a soufflé, and we’re decently confident in the ability of the cook, we have a vague idea of what will be made but no actually surety how it will be made. However, let’s say that a cook has the “Soufflé Maker’s Manual” on their bookshelf and has committed themselves to only make souffles from this book. Now we can also consult the same book that the cook has, and we have a precise understanding of what will happen when we tell the cook to make a soufflé. In this example, “make a soufflé” was the message in XCMP and the cookbook was the SPREE module.</p>
<p>In concrete terms, SPREE modules could be useful for various functionality on Polkadot. One suggested use case of SPREE modules is for a trustless decentralized exchange that is offered as functionality to any parachain without any extra effort from parachain developers. One can imagine this working by having a SPREE module that exposes the interface for the incrementing and decrementing of balances of various assets based on a unique identifier.</p>
<h2><a class="anchor" aria-hidden="true" id="why"></a><a href="#why" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why?</h2>
<p>Sending messages across parachains in XCMP only ensures that the message will be delivered but does not specify the code that will be executed, or how the message will be interpreted by the receiving parachain. There would be ways around this such as requesting a verifiable receipt of the execution from the receiving parachain, but in the naked case the other parachain would have to be trusted. Having shared code that exists in appendices that the parachain can opt-in to resolves the need for trust and makes the execution of the appendices completely trustless.</p>
<p>SPREE would be helpful to ensure that the same logic is shared between parachains in the SPREE modules. An especially relevant use case would revolve around the use of token transfers across parachains in which it is important that the sending and receiving parachains agree about how to change the total supply of tokens and a basic interface.</p>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p><img src="/docs/assets/SPREE/spree_module.png" alt="spree example"></p>
<p>The diagram above is a simplification of the Polkadot system.</p>
<p>In this diagram we see that the Wasm code for SPREE module &quot;X&quot; has been uploaded to the Polkadot Relay Chain. The two cylinders &quot;A&quot; and &quot;B&quot; represent two distinct parachains that have both opted-in to this SPREE module creating two distinct instances of it with their own XCMP endpoints &quot;A.X&quot; and &quot;B.X&quot;.</p>
<p>In the example we assume that this SPREE module &quot;X&quot; contains the functionality for incrementing of decrementing the balance of a particular asset that is unique to this module.</p>
<p>By initiating a transaction at A.X to decrease a particular balance by 1, a message over XCMP can be trustlessly sent to B.X to increase a balance by 1.</p>
<p>Collators, represented as the green triangle are responsible for relaying this message from parachain A to parachain B, as well as mantaining the storage for each particular instance of A.X and B.X for their respective parachains. They provide proofs of valid state transitions to the Relay Chain validators, represented as blue diamonds.</p>
<p>Validators can validate the correct state transitions of SPREE modules A.X and B.X by being provided with the previous state root of the SPREE module instances, the data of the XCMP message between the instances, and the next state root of the instance. They do this validation be checking it against the <code>validate</code> function as provided by the SPREE module API. Collators are expected to be able to provide this information in order to progress their parachains.</p>
<h2><a class="anchor" aria-hidden="true" id="metaphor"></a><a href="#metaphor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metaphor</h2>
<p>SPREE modules are like recipes in cookbooks. Let’s consider an example for comparison. We are at a restaurant and we give an order to a cook to make a soufflé. We're sufficiently confident in the cook’s ability and we have a vague idea of what will be made, but no actual surety how it will be made. If we want to be sure on the exact execution of the making of the soufflé, then we would need to inspect the cook’s kitchen before hand and verify ourselves how the cook makes the soufflé. This is comparable to sending XCMP messages without SPREE, as the sending party is responsible for verifying themselves the receiving chain’s code.</p>
<p>However, let's say that a cook has the Soufflé Maker's Manual; on their bookshelf and has committed themselves to only making soufflés from this book. One can now examine the book and have a precise understanding of what will happen when we tell the cook to make a soufflé. When we place an order to make a soufflé as is written on page 10 of the manual, we then know exactly what will be executed in the cook’s kitchen and the finished product that will come back to the table. Additionally, any kitchen we go to we can ask if the cook owns this book and if so we can order the standard recipe and be sure of the execution in the cook’s kitchen. Like the recipe in the cookbook, we only need to verify a SPREE module once in order to be sure of its execution across all parachains. If we know a parachain uses a specific SPREE module, it’s not necessary to know any other details on how the parachain is implemented.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/2/2020 by w3fbot</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/ru/learn-crosschain"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/docs/ru/learn-wasm"><span class="function-name-prevnext">WebAssembly (Wasm)</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#origin">Origin</a></li><li><a href="#what-is-a-spree-module">What is a SPREE module?</a></li><li><a href="#why">Why?</a></li><li><a href="#example">Example</a></li><li><a href="#metaphor">Metaphor</a></li></ul></nav></div><footer class="nav-footer spacer-y-4 pb-4" id="footer"><div class="container"><div class="justify-content-start row"><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">General</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/about" class="text-white" target="_blank" rel="noopener noreferrer">About</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/faq" class="text-white" target="_blank" rel="noopener noreferrer">FAQ</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/contact" class="text-white" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/build" class="text-white" target="_blank" rel="noopener noreferrer">Build</a></li><li class="py-0 py-md-1"><a href="https://github.com/w3f/General-Grants-Program" class="text-white" target="_blank" rel="noopener noreferrer">Grants and Bounties</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/jobs" class="text-white" target="_blank" rel="noopener noreferrer">Carrers</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Technology</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/technology" class="text-white" target="_blank" rel="noopener noreferrer">Technology</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/dot-token" class="text-white" target="_blank" rel="noopener noreferrer">Token</a></li><li class="py-0 py-md-1"><a href="https://telemetry.polkadot.io/" class="text-white" target="_blank" rel="noopener noreferrer">Telemetry</a></li><li class="py-0 py-md-1"><a href="https://www.parity.io/substrate" class="text-white" target="_blank" rel="noopener noreferrer">Substrate</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/PolkaDotPaper.pdf" class="text-white" target="_blank" rel="noopener noreferrer">Whitepaper</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/Polkadot-lightpaper.pdf" class="text-white" target="_blank" rel="noopener noreferrer">Lightpaper</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Community</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://polkadot.network/community" class="text-white" target="_blank" rel="noopener noreferrer">Community</a></li><li class="py-0 py-md-1"><a href="http://wiki.polkadot.network/en/latest/" class="text-white" target="_blank" rel="noopener noreferrer">Documentation</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/brand-assets" class="text-white" target="_blank" rel="noopener noreferrer">Brand Assets</a></li><li class="py-0 py-md-1"><a href="https://polkadot.network/blog" class="text-white" target="_blank" rel="noopener noreferrer">Blog</a></li><li class="py-0 py-md-1"><a href="https://riot.im/app/#/room/#polkadot-watercooler:matrix.org" class="text-white" target="_blank" rel="noopener noreferrer">Element Chat</a></li><li class="py-0 py-md-1"><a href="https://medium.com/polkadot-network" class="text-white" target="_blank" rel="noopener noreferrer">Medium</a></li></ul></div><div class="px-lg-0 col-md-3"><ul class="list-social-links justify-content-around"><li class="text-white"><a href="https://twitter.com/Polkadot" target="_blank" rel="noopener noreferrer"><i class="socicon-twitter"></i></a></li><li class="text-white"><a href="https://www.reddit.com/r/dot" target="_blank" rel="noopener noreferrer"><i class="socicon-reddit"></i></a></li><li class="text-white"><a href="https://wiki.polkadot.network/en/latest/polkadot/learn/implementations/" target="_blank" rel="noopener noreferrer"><i class="socicon-github"></i></a></li><li class="text-white"><a href="https://www.youtube.com/channel/UCB7PbjuZLEba_znc7mEGNgw" target="_blank" rel="noopener noreferrer"><i class="socicon-youtube"></i></a></li><li class="text-white"><a href="https://t.me/polkadotofficial" target="_blank" rel="noopener noreferrer"><i class="socicon-telegram"></i></a></li></ul><p class="d-block text-white">Subscribe to the newsletter to hear about Polkadot updates and events.</p><button type="button" class="btn btn-primary"><a href="https://info.polkadot.network/subscribe" target="_blank" style="color:white">Subscribe</a></button></div></div><div class="footer-legal align-items-end mt-5 pt-4 row"><div class="mb-2 mb-lg-0 col-lg-2"><a class="navbar-brand" href="https://polkadot.network/" target="_blank" rel="noopener noreferrer"><img src="/img/logo-polkadot-light.svg" alt="Polkadot Network"/></a></div><div class="col-lg-10"><ul class="list-unstyled d-flex flex-wrap list-pipe-separator"><li><a href="https://web3.foundation" class="text-white text-small" target="_blank" rel="noopener noreferrer">© 2020 Web3 Foundation</a></li><li><a href="https://polkadot.network/impressum" class="text-white text-small" target="_blank" rel="noopener noreferrer">Impressum</a></li><li><a href="https://polkadot.network/disclaimer" class="text-white text-small" target="_blank" rel="noopener noreferrer">Disclaimer</a></li><li><a href="https://polkadot.network/privacy" class="text-white text-small" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a class="text-white text-small" href="#" id="cookie-settings">Cookie Settings</a><script>
                        var cookieSettings = document.getElementById('cookie-settings');
                        cookieSettings.onclick = function() {
                          return klaro.show();
                        };
                        </script></li><li><a href="https://polkadot.network/testnetdisclaimer" class="text-white text-small" target="_blank" rel="noopener noreferrer">Testnet disclaimer</a></li></ul></div></div></div></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8bfa06b56bb8f33e5698c7f40b00b38f',
                indexName: 'polkadot',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:ru"]}
              });
            </script></body></html>